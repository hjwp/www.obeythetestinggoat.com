<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Behaviour-Driven Development (BDD)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<script>console.log('hi');
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
  if (httpRequest.readyState === XMLHttpRequest.DONE) {
    if (httpRequest.status === 200) {
      document.getElementById('header').innerHTML += httpRequest.responseText;
      console.log('ajax loaded');
    } 
  }
};
httpRequest.open('GET', 'toc.html');
httpRequest.send();
</script></head>
<body class="article toc2 toc-left">
<div id="buy_the_book" style="position: absolute; top: 0; right: 0; z-index:100">
  <a href="/pages/book.html">
    <img src="images/buy_the_book.svg" alt="buy the book ribbon">
  </a>
</div>
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="appendix-bdd">Appendix A: Behaviour-Driven Development (BDD)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
Now I haven&#8217;t used BDD "in anger," so I can&#8217;t claim any sort of expertise, but I
really like what I have seen of it, and I thought that you deserved at least a
whirlwind tour.  In this appendix, we&#8217;ll take some of the tests we wrote in a
"normal" FT, and convert them to using BDD tools.</p>
</div>
<div class="sect2">
<h3 id="_what_is_bdd">What is BDD?</h3>
<div class="paragraph">
<p>BDD, <em>strictly</em> speaking, is a methodology rather than a toolset&#8212;&#8203;it&#8217;s the
approach of testing your application by testing the behaviour that we expect it
to display to a user (the
<a href="https://en.wikipedia.org/wiki/Behavior-driven_development">Wikipedia entry</a>
has quite a good overview). So, in some ways, the selenium-based FTs that I&#8217;ve
shown in the rest of the book <em>could</em> be called BDD.</p>
</div>
<div class="paragraph">
<p>

But the term has become closely associated with a particular set of tools for
doing BDD, most importantly the
<a href="https://github.com/cucumber/cucumber/wiki/Gherkin">Gherkin syntax</a>, which is a
human-readable DSL for writing functional (or acceptance) tests. Gherkin
originally came out of the Ruby world, where it&#8217;s associated with a test runner
called <a href="http://cukes.info/">Cucumber</a>.</p>
</div>
<div class="paragraph">
<p>

In the Python world, we have a couple of equivalent test running tools,
<a href="http://lettuce.it/">Lettuce</a> and <a href="http://pythonhosted.org/behave/">Behave</a>.
Of these, only Behave was compatible with Python 3 at the time of writing, so
that&#8217;s what we&#8217;ll use. We&#8217;ll also use a plugin called
<a href="https://pythonhosted.org/behave-django/">behave-django</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Getting the Code for These Examples</div>
<div class="paragraph">
<p>I&#8217;m going to use the example from <a href="/book/chapter_18.html">Chapter 18</a>.
We have a basic to-do lists site, and we want to add a new feature:
logged-in users should be able to view the lists they&#8217;ve authored in one place.
Up until this point, all lists are effectively anonymous.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve been following along with the book, I&#8217;m going to assume you can skip
back to the code for that point.  If you want to pull it from my repo, the
place to go is the
<a href="https://github.com/hjwp/book-example/tree/chapter_17">chapter_17 branch</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_housekeeping">Basic Housekeeping</h3>
<div class="paragraph">
<p>We make a directory for our BDD "features," add a steps directory (we&#8217;ll find
out what these are shortly!), and placeholder for our first feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>mkdir -p features/steps</strong>
$ <strong>touch features/my_lists.feature</strong>
$ <strong>touch features/steps/my_lists.py</strong>
$ <strong>tree features</strong>
features
&#9500;&#9472;&#9472; my_lists.feature
&#9492;&#9472;&#9472; steps
 &#160;&#160; &#9492;&#9472;&#9472; my_lists.py</pre>
</div>
</div>
<div class="paragraph">
<p>We install behave-django, and add it to settings.py:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pip install behave-django</strong></pre>
</div>
</div>
<div class="listingblock sourcecode">
<div class="title">lists/tests.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="diff"><span class="line head"><span class="head">--- </span><span class="filename">a/superlists/settings.py</span></span>
<span class="line head"><span class="head">+++ </span><span class="filename">b/superlists/settings.py</span></span>
<span class="change"><span class="change">@@</span> -41,6 +41,7 <span class="change">@@</span></span> INSTALLED_APPS = (
     <span class="string"><span class="delimiter">'</span><span class="content">lists</span><span class="delimiter">'</span></span>,
     <span class="string"><span class="delimiter">'</span><span class="content">accounts</span><span class="delimiter">'</span></span>,
     <span class="string"><span class="delimiter">'</span><span class="content">functional_tests</span><span class="delimiter">'</span></span>,
<span class="line insert"><span class="insert">+</span>    <span class="string"><span class="delimiter">'</span><span class="content">behave_django</span><span class="delimiter">'</span></span>,</span>
 )</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then run <code>python manage.py behave</code> as a sanity check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>python manage.py behave</strong>
Creating test database for alias <em>default</em>...
0 features passed, 0 failed, 0 skipped
0 scenarios passed, 0 failed, 0 skipped
0 steps passed, 0 failed, 0 skipped, 0 undefined
Took 0m0.000s</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_an_ft_as_a_feature_using_gherkin_syntax">Writing an FT as a "Feature" using Gherkin Syntax</h3>
<div class="paragraph">
<p>Up until now, we&#8217;ve been writing our FTs using human-readable comments
that describe the new feature in terms of a user story, interspersed
with the selenium code required to execute each step in the story.</p>
</div>
<div class="paragraph">
<p>BDD enforces a distinction between those two&#8212;&#8203;we write our human-readable
story using a human-readable (if occasionally somewhat awkward) syntax
called "Gherkin", and that is called the "Feature".  Later, we&#8217;ll map
each line of Gherkin to a function that contains the selenium code necessary
to implement that "step."</p>
</div>
<div class="paragraph">
<p>Here&#8217;s what a Feature for our new "My lists" page could look like:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/my_lists.feature</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gherkin">Feature: My Lists
    As a logged-in user
    I want to be able to see all my lists in one page
    So that I can find them all after I've written them

    Scenario: Create two lists and see them on the My Lists page

        Given I am a logged-in user

        When I create a list with first item "Reticulate Splines"
            And I add an item "Immanentize Eschaton"
            And I create a list with first item "Buy milk"

        Then I will see a link to "My lists"

        When I click the link to "My lists"
        Then I will see a link to "Reticulate Splines"
        And I will see a link to "Buy milk"

        When I click the link to "Reticulate Splines"
        Then I will be on the "Reticulate Splines" list page</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_as_a_i_want_to_so_that">As-a /I want to/So that</h4>
<div class="paragraph">
<p>At the top you&#8217;ll notice the As-a/I want to/So that clause.  This is
optional, and it has no executable counterpart&#8212;&#8203;it&#8217;s just a slightly
formalised way of capturing the "Who and Why?" aspects of a user story,
gently encouraging the team to think about the justifications for each
feature.</p>
</div>
</div>
<div class="sect3">
<h4 id="_given_when_then">Given/When/Then</h4>
<div class="paragraph">
<p>Given/When/Then is the real core of a BDD test.  This trilobite formulation
matches the setup/exercise/assert pattern we&#8217;ve seen in our unit tests, and
it represents the setup and assumptions phase, an exercise/action phase, and
a subsequent assertion/observation phase.  There&#8217;s more info on the
<a href="https://github.com/cucumber/cucumber/wiki/Given-When-Then">Cucumber wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_not_always_a_perfect_fit">Not Always A Perfect Fit!</h4>
<div class="paragraph">
<p>As you can see, it&#8217;s not always easy to shoe-horn a user story into exactly
three steps!  We can use the <code>And</code> clause to expand on a step, and I&#8217;ve
added multiple <code>When</code> steps and subsequent <code>Then</code>'s to illustrate further
aspects of our My lists page.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coding_the_step_functions">Coding the Step Functions</h3>
<div class="paragraph">
<p>We now build the counterpart to our Gherkin-syntax feature, which are the
"step" functions which will actually implement them in code.</p>
</div>
<div class="sect3">
<h4 id="_generating_placeholder_steps">Generating Placeholder Steps</h4>
<div class="paragraph">
<p>When we run <code>behave</code>, it helpfully tells us about all the steps we need to
implement:</p>
</div>
<div class="listingblock sourcecode small-code">
<div class="content">
<pre>$ <strong>python manage.py behave</strong>
Feature: My Lists # features/my_lists.feature:1
  As a logged-in user
  I want to be able to see all my lists in one page
  So that I can find them all after I've written them
  Scenario: Create two lists and see them on the My Lists page  # my_lists.feature:6
    Given I am a logged-in user                                 # None
    Given I am a logged-in user                                 # None
    When I create a list with first item "Reticulate Splines"   # None
    And I add an item "Immanentize Eschaton"                    # None
    And I create a list with first item "Buy milk"              # None
    Then I will see a link to "My lists"                        # None
    When I click the link to "My lists"                         # None
    Then I will see a link to "Reticulate Splines"              # None
    And I will see a link to "Buy milk"                         # None
    When I click the link to "Reticulate Splines"               # None
    Then I will be on the "Reticulate Splines" list page        # None


Failing scenarios:
  features/my_lists.feature:6  Create two lists and see them on the My Lists page


0 features passed, 1 failed, 0 skipped
0 scenarios passed, 1 failed, 0 skipped
0 steps passed, 0 failed, 0 skipped, 10 undefined
Took 0m0.000s

You can implement step definitions for undefined steps with these snippets:

@given(u'I am a logged-in user')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given I am a logged-in user')

@when(u'I create a list with first item "Reticulate Splines"')
def step_impl(context):
[...]</pre>
</div>
</div>
<div class="paragraph">
<p>And you&#8217;ll notice all this output is nicely coloured, as shown in
<a href="#behave-output">Behave with coloured console ouptut</a>.</p>
</div>
<div id="behave-output" class="imageblock">
<div class="content">
<img src="images/behave-output-colour.png" alt="Colourful console output">
</div>
<div class="title">Figure 1. Behave with coloured console ouptut</div>
</div>
<div class="paragraph">
<p>It&#8217;s encouraging us to copy and paste these snippets, and use them as
starting points to build our steps.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_first_step_definition">First Step Definition</h3>
<div class="paragraph">
<p>Here&#8217;s a first stab at making a step for our "Given I am a logged-in user"
step. I started by stealing the code for <code>self.create_pre_authenticated_session</code>
from <em>functional_tests/test_my_lists.py</em>, and adapting it slightly (removing
the server-side version, for example, although it would be easy to re-add
later).</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/steps/my_lists.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">from</span> <span class="include">behave</span> <span class="keyword">import</span> <span class="include">given</span>, <span class="include">when</span>, <span class="include">then</span>
<span class="keyword">from</span> <span class="include">functional_tests.management.commands.create_session</span> <span class="keyword">import</span> \
    <span class="include">create_pre_authenticated_session</span>
<span class="keyword">from</span> <span class="include">django.conf</span> <span class="keyword">import</span> <span class="include">settings</span>


<span class="decorator">@given</span>(<span class="string"><span class="delimiter">'</span><span class="content">I am a logged-in user</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">given_i_am_logged_in</span>(context):
    session_key = create_pre_authenticated_session(email=<span class="string"><span class="delimiter">'</span><span class="content">edith@example.com</span><span class="delimiter">'</span></span>)
    <span class="comment">## to set a cookie we need to first visit the domain.</span>
    <span class="comment">## 404 pages load the quickest!</span>
    context.browser.get(context.server_url + <span class="string"><span class="delimiter">"</span><span class="content">/404_no_such_url/</span><span class="delimiter">"</span></span>)
    context.browser.add_cookie(<span class="predefined">dict</span>(
        name=settings.SESSION_COOKIE_NAME,
        value=session_key,
        path=<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
    ))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>context</em> variable needs a little explaining&#8201;&#8212;&#8201;it&#8217;s a sort of global
variable, in the sense that it&#8217;s passed to each step that&#8217;s executed, and it
can be used to store information that we need to share between steps. Here
we&#8217;ve assumed we&#8217;ll be storing a browser object on it, and the <code>server_url</code>.
We end up using it a lot like we used <code>self</code> when we were writing <code>unittest</code>
FTs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setup_and_teardown_equivalents_in_environment_py">setUp and tearDown Equivalents in environment.py</h3>
<div class="paragraph">
<p>Steps can make changes to state in the <code>context</code>, but the place to do
preliminary set-up, the equivalent of <code>setUp</code>, is in a file called
<em>environment.py</em>:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/environment.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">from</span> <span class="include">selenium</span> <span class="keyword">import</span> <span class="include">webdriver</span>

<span class="keyword">def</span> <span class="function">before_all</span>(context):
    context.browser = webdriver.Firefox()
    context.browser.implicitly_wait(<span class="integer">2</span>)
    context.server_url = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:8081</span><span class="delimiter">'</span></span>

<span class="keyword">def</span> <span class="function">after_all</span>(context):
    context.browser.quit()

<span class="keyword">def</span> <span class="function">before_feature</span>(context, feature):
    <span class="keyword">pass</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_another_run">Another Run</h3>
<div class="paragraph">
<p>As a sanity check, we can do another run, to see if the new step works and
that we really can start a browser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>python manage.py behave</strong>
[...]
1 step passed, 0 failed, 0 skipped, 9 undefined</pre>
</div>
</div>
<div class="paragraph">
<p>The usual reams of output, but we can see that it seems to have made it through
the first step; let&#8217;s define the rest of them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_capturing_parameters_in_steps">Capturing Parameters in Steps</h3>
<div class="paragraph">
<p>We&#8217;ll see how behave allows you to capture parameters from step descriptions.
Our next step says:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/my_lists.feature</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gherkin">    And I create a list with first item "Reticulate Splines"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the auto-generated step definition looked like this:</p>
</div>
<div class="listingblock sourcecode currentcontents small-code">
<div class="title">features/steps/test_my_lists.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@given</span>(<span class="string"><span class="delimiter">'</span><span class="content">I create a list with first item "Reticulate Splines"</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">step_impl</span>(context):
    <span class="keyword">raise</span> <span class="exception">NotImplementedError</span>(
        <span class="string"><span class="modifier">u</span><span class="delimiter">'</span><span class="content">STEP: When I create a list with first item "Reticulate Splines"</span><span class="delimiter">'</span></span>
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>We want to be able to create lists with arbitrary first items, so it would be
nice to somehow capture whatever is between those quotes, and pass them in as
an argument to a more generic function.  That&#8217;s a common requirement in BDD,
and behave has a nice syntax for it, reminiscent of the new-style Python string
formatting syntax:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/steps/test_my_lists.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@when</span>(<span class="string"><span class="delimiter">'</span><span class="content">I create a list with first item "{first_item_text}"</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">create_a_list</span>(context, first_item_text):
    context.browser.get(context.server_url)
    context.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_text</span><span class="delimiter">'</span></span>).send_keys(first_item_text)
    context.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_text</span><span class="delimiter">'</span></span>).send_keys(<span class="string"><span class="delimiter">'</span><span class="char">\n</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Neat, huh?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Capturing parameters for steps is one of the most powerful features
    of the BDD syntax.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly, we can do adding to an existing list, and see or click on links:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/steps/test_my_lists.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@when</span>(<span class="string"><span class="delimiter">'</span><span class="content">I add an item "{item_text}"</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">add_an_item</span>(context, item_text):
    context.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_text</span><span class="delimiter">'</span></span>).send_keys(item_text)
    context.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_text</span><span class="delimiter">'</span></span>).send_keys(<span class="string"><span class="delimiter">'</span><span class="char">\n</span><span class="delimiter">'</span></span>)

<span class="decorator">@then</span>(<span class="string"><span class="delimiter">'</span><span class="content">I will see a link to "{link_text}"</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">see_a_link</span>(context, link_text):
    context.browser.find_element_by_link_text(link_text)

<span class="decorator">@when</span>(<span class="string"><span class="delimiter">'</span><span class="content">I click the link to "{link_text}"</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">click_link</span>(context, link_text):
    context.browser.find_element_by_link_text(link_text).click()</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally the slightly more complex step that says I am on the
page for a particular list:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">features/steps/test_my_lists.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@then</span>(<span class="string"><span class="delimiter">'</span><span class="content">I will be on the "{first_item_text}" list page</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">step_impl</span>(context, first_item_text):
    table = context.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_list_table</span><span class="delimiter">'</span></span>)
    rows = table.find_elements_by_tag_name(<span class="string"><span class="delimiter">'</span><span class="content">tr</span><span class="delimiter">'</span></span>)
    expected_row_text = <span class="string"><span class="delimiter">'</span><span class="content">1: </span><span class="delimiter">'</span></span> + first_item_text
    <span class="keyword">assert</span> rows[<span class="integer">0</span>].text == expected_row_text</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can run it and see our first expected failure:</p>
</div>
<div class="listingblock sourcecode small-code">
<div class="content">
<pre>$ <strong>./manage.py behave</strong>
Creating test database for alias 'default'...
Feature: My Lists # features/my_lists.feature:1
  As a logged-in user
  I want to be able to see all my lists in one page
  So that I can find them all after I've written them
  Scenario: Create two lists and see them on the My Lists page  # my_lists.feature:6
    Given I am a logged-in user                                 # steps/my_lists.py:7
Not Found: /404_no_such_url/
Not Found: /favicon.ico
    Given I am a logged-in user                                 # steps/my_lists.py:7 0.09s
    When I create a list with first item "Reticulate Splines"   # steps/my_lists.py:20 8.46s
    And I add an item "Immanentize Eschaton"                    # steps/my_lists.py:27 0.82s
    And I create a list with first item "Buy milk"              # steps/my_lists.py:20 0.40s
    Then I will see a link to "My lists"                        # steps/my_lists.py:33 8.27s
      Traceback (most recent call last):
        [...]
      selenium.common.exceptions.NoSuchElementException: Message: Unable to
        locate element: {"method":"link text","selector":"My lists"}

    [...]

Failing scenarios:
  features/my_lists.feature:6  Create two lists and see them on the My Lists page

0 features passed, 1 failed, 0 skipped
0 scenarios passed, 1 failed, 0 skipped
4 steps passed, 1 failed, 5 skipped, 0 undefined
Took 0m18.064s
Destroying test database for alias 'default'...</pre>
</div>
</div>
<div class="paragraph">
<p>You can see how the output really gives you a sense of how far through the
"story" of the test we got: we manage to create our two lists successfully, but
the "My lists" link does not appear.</p>
</div>
</div>
<div class="sect2">
<h3 id="_comparing_the_inline_style_ft">Comparing the Inline-Style FT</h3>
<div class="paragraph">
<p>I&#8217;m not going to run through the implementation of the feature, but you can
see how the test will drive development just as well as the inline-style FT
would have.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s have a look at it, for comparison:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">lists/tests.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">def</span> <span class="function">test_logged_in_users_lists_are_saved_as_my_lists</span>(<span class="predefined-constant">self</span>):
    <span class="comment"># Edith is a logged-in user</span>
    <span class="predefined-constant">self</span>.create_pre_authenticated_session(<span class="string"><span class="delimiter">'</span><span class="content">edith@example.com</span><span class="delimiter">'</span></span>)

    <span class="comment"># She goes to the home page and starts a list</span>
    <span class="predefined-constant">self</span>.browser.get(<span class="predefined-constant">self</span>.server_url)
    <span class="predefined-constant">self</span>.get_item_input_box().send_keys(<span class="string"><span class="delimiter">'</span><span class="content">Reticulate splines</span><span class="char">\n</span><span class="delimiter">'</span></span>)
    <span class="predefined-constant">self</span>.get_item_input_box().send_keys(<span class="string"><span class="delimiter">'</span><span class="content">Immanentize eschaton</span><span class="char">\n</span><span class="delimiter">'</span></span>)
    first_list_url = <span class="predefined-constant">self</span>.browser.current_url

    <span class="comment"># She notices a "My lists" link, for the first time.</span>
    <span class="predefined-constant">self</span>.browser.find_element_by_link_text(<span class="string"><span class="delimiter">'</span><span class="content">My lists</span><span class="delimiter">'</span></span>).click()

    <span class="comment"># She sees that her list is in there, named according to its</span>
    <span class="comment"># first list item</span>
    <span class="predefined-constant">self</span>.browser.find_element_by_link_text(<span class="string"><span class="delimiter">'</span><span class="content">Reticulate splines</span><span class="delimiter">'</span></span>).click()
    <span class="predefined-constant">self</span>.assertEqual(<span class="predefined-constant">self</span>.browser.current_url, first_list_url)

    <span class="comment"># She decides to start another list, just to see</span>
    <span class="predefined-constant">self</span>.browser.get(<span class="predefined-constant">self</span>.server_url)
    <span class="predefined-constant">self</span>.get_item_input_box().send_keys(<span class="string"><span class="delimiter">'</span><span class="content">Click cows</span><span class="char">\n</span><span class="delimiter">'</span></span>)
    second_list_url = <span class="predefined-constant">self</span>.browser.current_url

    <span class="comment"># Under "my lists", her new list appears</span>
    <span class="predefined-constant">self</span>.browser.find_element_by_link_text(<span class="string"><span class="delimiter">'</span><span class="content">My lists</span><span class="delimiter">'</span></span>).click()
    <span class="predefined-constant">self</span>.browser.find_element_by_link_text(<span class="string"><span class="delimiter">'</span><span class="content">Click cows</span><span class="delimiter">'</span></span>).click()
    <span class="predefined-constant">self</span>.assertEqual(<span class="predefined-constant">self</span>.browser.current_url, second_list_url)

    <span class="comment"># She logs out.  The "My lists" option disappears</span>
    <span class="predefined-constant">self</span>.browser.find_element_by_id(<span class="string"><span class="delimiter">'</span><span class="content">id_logout</span><span class="delimiter">'</span></span>).click()
    <span class="predefined-constant">self</span>.assertEqual(
        <span class="predefined-constant">self</span>.browser.find_elements_by_link_text(<span class="string"><span class="delimiter">'</span><span class="content">My lists</span><span class="delimiter">'</span></span>),
        []
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s not entirely an apples-to-apples comparison, but we can look at the
number of lines of code in <a href="#table-code-compare">Lines of code comparison</a>.</p>
</div>
<table id="table-code-compare" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Lines of code comparison</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">BDD</th>
<th class="tableblock halign-left valign-top">Standard FT</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature file: 20 (3 optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test function body: 34</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Steps file: 40 lines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">helper functions: 20</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The comparison isn&#8217;t perfect, but you might say that the feature file and the
body of a "standard FT" test function are equivalent in that they present the
main "story" of a test, while the steps and helper functions represent the
"hidden" implementation details.  If you add them up, the total numbers are
pretty similar, but notice that they&#8217;re spread out differently: the BDD tests
have made the story more concise, and pushed more work out into the hidden
implementation details.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bdd_encourages_structured_test_code">BDD Encourages Structured Test Code</h3>
<div class="paragraph">
<p>This is the real appeal, for me: the BDD tool has <em>forced</em> us to structure our
test code.  In the inline-style FT, we&#8217;re free to use as many lines as we want
to implement a step, as described by its comment line.  It&#8217;s very hard to
resist the urge to just copy-and-paste code from elsewhere, or just from
earlier on in the test.   You can see that, by this point in the book, I&#8217;ve
built just a couple of helper functions (like <code>get_item_input_box</code>).</p>
</div>
<div class="paragraph">
<p>In contrast, the BDD syntax has immediately forced me to have a separate
function for each step, so I&#8217;ve already built some very reusable code to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start a new list</p>
</li>
<li>
<p>Add an item to an existing list</p>
</li>
<li>
<p>Click a on a link with particular text</p>
</li>
<li>
<p>Assert that I&#8217;m looking at a particular list&#8217;s page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>BDD really encourages you to write test code that seems to match well with
the business domain, and to use a layer of abstraction between the story of
your FT and its implementation in code.</p>
</div>
<div class="paragraph">
<p>The ultimate expression of this is that, theoretically, if you wanted to
change programming languages, you could keep all your features in Gherkin
syntax exactly as they are, and throw away the Python steps and replace them
with steps implemented in another language.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_page_pattern_as_an_alternative">The Page Pattern as an Alternative</h3>
<div class="paragraph">
<p>In
<a href="/book/chapter_21.html">[page-pattern-chapter]</a>
of the book, I present an example of the "Page pattern", which is an
object-oriented approach to structuring your selenium tests.  Here&#8217;s a
reminder of what it looks like:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">functional_tests/test_sharing.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">from</span> .home_and_list_pages <span class="keyword">import</span> <span class="include">HomePage</span>
[...]

<span class="keyword">class</span> <span class="class">SharingTest</span>(FunctionalTest):

    <span class="keyword">def</span> <span class="function">test_logged_in_users_lists_are_saved_as_my_lists</span>(<span class="predefined-constant">self</span>):
        <span class="comment"># [...]</span>
        list_page = HomePage(<span class="predefined-constant">self</span>).start_new_list(<span class="string"><span class="delimiter">'</span><span class="content">Get help</span><span class="delimiter">'</span></span>)

        <span class="comment"># She notices a "Share this list" option</span>
        share_box = list_page.get_share_box()
        <span class="predefined-constant">self</span>.assertEqual(
            share_box.get_attribute(<span class="string"><span class="delimiter">'</span><span class="content">placeholder</span><span class="delimiter">'</span></span>),
            <span class="string"><span class="delimiter">'</span><span class="content">your-friend@example.com</span><span class="delimiter">'</span></span>
        )

        <span class="comment"># She shares her list.</span>
        <span class="comment"># The page updates to say that it's shared with Oniciferous:</span>
        list_page.share_list_with(<span class="string"><span class="delimiter">'</span><span class="content">oniciferous@example.com</span><span class="delimiter">'</span></span>)

        <span class="comment"># Oniciferous now goes to the lists page with his browser</span>
        <span class="predefined-constant">self</span>.browser = oni_browser
        HomePage(<span class="predefined-constant">self</span>).go_to_home_page().go_to_my_lists_page()</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the Page classes look like this:</p>
</div>
<div class="listingblock sourcecode">
<div class="title">functional_tests/home_and_lists_pages.py</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">class</span> <span class="class">HomePage</span>(<span class="predefined">object</span>):

    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="predefined-constant">self</span>, test):
        <span class="predefined-constant">self</span>.test = test


    <span class="keyword">def</span> <span class="function">go_to_home_page</span>(<span class="predefined-constant">self</span>):
        <span class="predefined-constant">self</span>.test.browser.get(<span class="predefined-constant">self</span>.test.server_url)
        <span class="predefined-constant">self</span>.test.wait_for(<span class="predefined-constant">self</span>.get_item_input)
        <span class="keyword">return</span> <span class="predefined-constant">self</span>


    <span class="keyword">def</span> <span class="function">get_item_input</span>(<span class="predefined-constant">self</span>):
        <span class="keyword">return</span> <span class="predefined-constant">self</span>.test.browser.find_element_by_id(ITEM_INPUT_ID)


    <span class="keyword">def</span> <span class="function">start_new_list</span>(<span class="predefined-constant">self</span>, item_text):
        <span class="predefined-constant">self</span>.go_to_home_page()
        inputbox = <span class="predefined-constant">self</span>.get_item_input()
        inputbox.send_keys(item_text + <span class="string"><span class="delimiter">'</span><span class="char">\n</span><span class="delimiter">'</span></span>)
        list_page = ListPage(<span class="predefined-constant">self</span>.test)
        list_page.wait_for_new_item_in_list(item_text, <span class="integer">1</span>)
        <span class="keyword">return</span> list_page


    <span class="keyword">def</span> <span class="function">go_to_my_lists_page</span>(<span class="predefined-constant">self</span>):
        [...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>So it&#8217;s definitely possible to implement a similar layer of abstraction,
and a sort of DSL, in inline-style FTs, whether it&#8217;s by using the Page
pattern or whatever structure you prefer&#8201;&#8212;&#8201;but now it&#8217;s a matter of
self-discipline, rather than having a framework that pushes you towards
it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In fact, you can actually use the Page pattern with BDD as well, as
a resource for your steps to use when navigating the pages of your site.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_bdd_might_be_less_expressive_than_inline_comments">BDD Might Be Less Expressive than Inline Comments</h3>
<div class="paragraph">
<p>On the other hand, I can also see potential for the Gherkin syntax to
feel somewhat restrictive.  Compare how expressive and readable the
inline-style comments are, with the slightly awkward BDD feature:</p>
</div>
<div class="literalblock">
<div class="content">
<pre># Edith is a logged-in user
# She goes to the home page and starts a list
# She notices a "My lists" link, for the first time.
# She sees that her list is in there, named according to its
# first list item
# She decides to start another list, just to see
# Under "my lists", her new list appears
# She logs out.  The "My lists" option disappears</pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s much more readable and natural than our slightly forced Given/Then/When
incantations, and, in a way, might encourage more user-centric thinking. (There
is a syntax in Gherkin for including "comments" in a feature file, which would
mitigate this somewhat, but I gather that it&#8217;s not widely used.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_will_nonprogrammers_write_tests">Will Nonprogrammers Write Tests?</h3>
<div class="paragraph">
<p>I haven&#8217;t touched on one of the original promises of BDD, which is that
nonprogrammers&#8212;&#8203;business or client representatives perhaps&#8212;&#8203;might actually
write the Gherkin syntax.  I&#8217;m quite skeptical about whether this would
actually work in the real world, but I don&#8217;t think that detracts from the other
potential benefits of BDD.</p>
</div>
</div>
<div class="sect2">
<h3 id="_some_tentative_conclusions">Some Tentative Conclusions</h3>
<div class="paragraph">
<p>I&#8217;ve only dipped my toes into the BDD world, so I&#8217;m hesitant to draw any firm
conclusions. I find the "forced" structuring of FTs into steps very appealing
though&#8212;&#8203;it looks like it has the potential to encourage a lot of reuse in your
FT code, and that it neatly separates concerns between describing the story,
and implementing it, and that it forces us to think about things in terms of
the business domain, rather than in terms of "what we need to do with
selenium."</p>
</div>
<div class="paragraph">
<p>But there&#8217;s no free lunch. The Gherkin syntax is restrictive, compared to
the total freedom offered by inline FT comments.</p>
</div>
<div class="paragraph">
<p>I also would like to see how BDD scales once you have not just one or two
features, and four or five steps, but several dozen features and hundreds of
lines of steps code.</p>
</div>
<div class="paragraph">
<p>Overall, I would say it&#8217;s definitely worth investigating, and I will probably
use BDD for my next personal project.</p>
</div>
<div class="paragraph">
<p>My thanks to Daniel Pope, Rachel Willmer, and Jared Contrascere for their
feedback on this chapter.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">BDD Conclusions</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Encourages structured, reusable test code</dt>
<dd>
<p>By separating concerns, breaking your FTs out into the human-readable,
Gherkin syntax "feature" file and a separate implementation of steps
functions, BDD has the potential to encourage more reusable and manageable
test code</p>
</dd>
<dt class="hdlist1">It may come at the expense of readability</dt>
<dd>
<p>The Gherkin syntax, for all its attempt to be human-readable, is ultimately
a constraint on human language, and so it may not capture nuance and
intention as well as inline comments do.</p>
</dd>
<dt class="hdlist1">Try it! I will</dt>
<dd>
<p>As I keep saying, I haven&#8217;t used BDD on a real project, so you should take
my words with a heavy pinch of salt, but I&#8217;d like to give it a hearty
endorsement.  I&#8217;m going to try it out on the next project I can, and I&#8217;d
encourage you to do so as well.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-12-18 20:53:47 CET
</div>
</div>
<div class="comments" style="padding: 20px">
  <h3>Comments</h3>
  <div id="disqus_thread"></div>

  <script type="text/javascript">
var disqus_shortname = 'obeythetestinggoat';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
  </script>

  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<html><head><script>   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');    ga('create', 'UA-40928035-1', 'obeythetestinggoat.com');   ga('send', 'pageview');  </script>
</head></html></body>
</html>