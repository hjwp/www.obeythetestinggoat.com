<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Cheat Sheet</title>
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script>var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
  if (httpRequest.readyState === XMLHttpRequest.DONE) {
    if (httpRequest.status === 200) {
      document.getElementById('header').innerHTML += httpRequest.responseText;
      var subheaders = document.getElementsByClassName('sectlevel2');
      var section;
      for (var i=0; i<subheaders.length; i++) {
        section = subheaders[i];
        if (section.innerHTML.indexOf(window.location.pathname) === -1) {
          section.style.display = 'none';
        } else {
          section.scrollIntoView && section.scrollIntoView();
        }
      }

    }
  }
};
httpRequest.open('GET', 'toc.html');
httpRequest.send();

</script></head>
<body class="article toc2 toc-left">
<div id="buy_the_book" style="position: absolute; top: 0; right: 0; z-index:100">
  <a href="/pages/book.html">
    <img src="images/buy_the_book.svg" alt="buy the book ribbon">
  </a>
</div>
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="cheat-sheet">Appendix G: Cheat Sheet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By popular demand, this "cheat sheet" is loosely based on the little
recap/summary boxes from the end of each chapter.  The idea is to provide a few
reminders, and links to the chapters where you can find out more to jog your
memory. I hope you find it useful!</p>
</div>
<div class="sect2">
<h3 id="_initial_project_setup">Initial Project Setup</h3>
<div class="ulist">
<ul>
<li>
<p>Start
with a <em>User Story</em> and map it to a first <em>functional test</em>.</p>
</li>
<li>
<p>Pick a test framework&#8212;<code>unittest</code> is fine, and options like <code>py.test</code>,
<code>nose</code>, or <code>Green</code> can also offer some advantages.</p>
</li>
<li>
<p>Run the functional test and see your first <em>expected failure</em>.</p>
</li>
<li>
<p>Pick a web framework such as Django, and find out how to run
<em>unit tests</em> against it.</p>
</li>
<li>
<p>Create your first <em>unit test</em> to address the current FT failure,
and see it fail.</p>
</li>
<li>
<p>Do  your <em>first commit</em> to a VCS like <em>Git</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_01.html">[chapter_01]</a>, <a href="/book/chapter_02_unittest.html">[chapter_02_unittest]</a>, <a href="/book/chapter_03_unit_test_first_view.html">[chapter_03_unit_test_first_view]</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_the_basic_tdd_workflow">The Basic TDD Workflow</h3>
<div class="ulist">
<ul>
<li>
<p>Double-loop TDD (<a href="#Double-Loop-TDD-diagram2">Double-loop TDD</a>)</p>
</li>
<li>
<p>Red, Green, Refactor</p>
</li>
<li>
<p>Triangulation</p>
</li>
<li>
<p>The scratchpad</p>
</li>
<li>
<p>"3 Strikes and Refactor"</p>
</li>
<li>
<p>"Working State to Working State"</p>
</li>
<li>
<p>"YAGNI"</p>
</li>
</ul>
</div>
<div id="Double-Loop-TDD-diagram2" class="imageblock">
<div class="content">
<img src="images/double-loop-tdd-simpler.png" alt="An inner red/green/refactor loop surrounded by an outer red/green of FTs">
</div>
<div class="title">Figure 1. Double-loop TDD</div>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_04_philosophy_and_refactoring.html">[chapter_04_philosophy_and_refactoring]</a>, <a href="/book/chapter_05_post_and_database.html">[chapter_05_post_and_database]</a>, <a href="/book/chapter_07_working_incrementally.html">[chapter_07_working_incrementally]</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_moving_beyond_dev_only_testing">Moving Beyond Dev-Only Testing</h3>
<div class="ulist">
<ul>
<li>
<p>Start
system testing early. Ensure your components work together: web server,
  static content, database.</p>
</li>
<li>
<p>Build a staging environment to match your production environment, and run
your FT suite against it.</p>
</li>
<li>
<p>Automate your staging and production environments:</p>
<div class="ulist">
<ul>
<li>
<p>PaaS vs. VPS</p>
</li>
<li>
<p>Fabric</p>
</li>
<li>
<p>Configuration management (Chef, Puppet, Salt, Ansible)</p>
</li>
<li>
<p>Vagrant</p>
</li>
</ul>
</div>
</li>
<li>
<p>Think through deployment pain points: the database, static files,
dependencies, how to customise settings, and so on.</p>
</li>
<li>
<p>Build a CI server as soon as possible, so that you don&#8217;t have to rely
on self-discipline to see the tests run.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_11_ansible.html">[chapter_11_ansible]</a>, <a href="/book/chapter_CI.html">[chapter_CI]</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_general_testing_best_practices">General Testing Best Practices</h3>
<div class="ulist">
<ul>
<li>
<p>Each
test should test one thing.</p>
</li>
<li>
<p>One test file per application code source file.</p>
</li>
<li>
<p>Consider at least a placeholder test for every function and class,
no matter how simple.</p>
</li>
<li>
<p>"Don&#8217;t test constants".</p>
</li>
<li>
<p>Try to test behaviour rather than implementation.</p>
</li>
<li>
<p>Try to think beyond the charmed path through the code, and think
through edge cases and error cases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_04_philosophy_and_refactoring.html">[chapter_04_philosophy_and_refactoring]</a>, <a href="/book/chapter_13_database_layer_validation.html">[chapter_13_database_layer_validation]</a>,
<a href="/book/chapter_14_simple_form.html">[chapter_14_simple_form]</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_seleniumfunctional_testing_best_practices">Selenium/Functional Testing Best Practices</h3>
<div class="ulist">
<ul>
<li>
<p>Use explicit rather than implicit waits, and the interaction/wait pattern.</p>
</li>
<li>
<p>Avoid duplication of test code&#8212;&#8203;helper methods in a base class and the
Page pattern are possible solutions.</p>
</li>
<li>
<p>Avoid double-testing functionality. If you have a test that covers a
time-consuming process (e.g., login), consider ways of skipping it in
other tests (but be aware of unexpected interactions between seemingly
unrelated bits of functionality).</p>
</li>
<li>
<p>Look into BDD tools as another way of structuring your FTs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_server_side_debugging.html">[chapter_server_side_debugging]</a>, <a href="/book/chapter_CI.html">[chapter_CI]</a>,
<a href="/book/chapter_page_pattern.html">[chapter_page_pattern]</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_outside_in_test_isolation_versus_integrated_tests_and_mocking">Outside-In, Test Isolation Versus Integrated Tests, and Mocking</h3>
<div class="paragraph">
<p>Remember
the reasons we write tests in the first place:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To ensure correctness and prevent regressions</p>
</li>
<li>
<p>To help us to write clean, maintainable code</p>
</li>
<li>
<p>To enable a fast, productive workflow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And with those objectives in mind, think of different types of tests,
and the trade-offs between them:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Functional tests</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Provide the best guarantee that your application really works correctly, from the point of view of the user</p>
</li>
<li>
<p>But: it&#8217;s a slower feedback cycle</p>
</li>
<li>
<p>And they don&#8217;t necessarily help you write clean code</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Integrated tests (reliant on, for example, the ORM or the Django Test Client)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Are quick to write</p>
</li>
<li>
<p>Are easy to understand</p>
</li>
<li>
<p>Will warn you of any integration issues</p>
</li>
<li>
<p>But: may not always drive good design (that&#8217;s up to you!)</p>
</li>
<li>
<p>And are usually slower than isolated tests</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Isolated ("mocky") tests</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Involve the most hard work</p>
</li>
<li>
<p>Can be harder to read and understand</p>
</li>
<li>
<p>But: are the best ones for guiding you towards better design</p>
</li>
<li>
<p>And run the fastest</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If you do find yourself writing tests with lots of mocks, and they feel
painful, remember &#8220;<em>listen to your tests</em>&#8221;&#8212;ugly, mocky tests may be
trying to tell you that your code could be simplified.</p>
</div>
<div class="paragraph">
<p>Relevant chapters: <a href="/book/chapter_outside_in.html">[chapter_outside_in]</a>, <a href="/book/chapter_purist_unit_tests.html">[chapter_purist_unit_tests]</a>,
<a href="/book/chapter_hot_lava.html">[chapter_hot_lava]</a></p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
License: Creative Commons <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode">CC-BY-NC-ND</a>. Last updated: 2024-05-20 17:54:12 +0100
</div>
</div>
<div class="comments" style="padding: 20px">
  <h3>Comments</h3>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.identifier = 'appendix_IX_cheat_sheet';
    };
    
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//obeythetestinggoat.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

<html><head><script>   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');    ga('create', 'UA-40928035-1', 'obeythetestinggoat.com');   ga('send', 'pageview');  </script>
</head></html></body>
</html>