<!DOCTYPE html>
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<html lang="en">
<head>
    <meta charset="utf-8" />
        <!-- Set the viewport width to device width for mobile -->
        <meta name="viewport" content="width=device-width" />
        <title>Obey the Testing Goat!</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/static/css/normalize.css">
        <link rel="stylesheet" href="/static/css/pygments.css">
        <link rel="stylesheet" href="/static/css/extra.css">
        <link rel="stylesheet" href="/static/css/foundation.css">
        <link href='https://fonts.googleapis.com/css?family=Life+Savers:400,700|Sanchez:400,400italic|Ovo' rel='stylesheet' type='text/css'>


        <link rel="stylesheet" href="/static/css/social_foundicons.css">
        <!--[if lt IE 8]>
            <link rel="stylesheet" href="stylesheets/social_foundicons_ie7.css">
        <![endif]-->


        <link href="http://www.obeythetestinggoat.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Obey the Testing Goat! Full Atom Feed" />
        <link href="http://www.obeythetestinggoat.com/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title="Obey the Testing Goat! Categories Atom Feed" />
</head>

<body>
    <header class="row">
        <div class="large-12 columns">
            <div class="row">
                <span class="right"><a href="http://www.obeythetestinggoat.com/feeds/all.atom.xml" type="application/rss+xml"><i class="social foundicon-rss"></i> RSS</a></span>
                <div class="large-2 columns">
                    <a href="http://www.obeythetestinggoat.com"><img src="/static/images/kid_goat.png" alt="The Testing Goat" title="The Testing Goat" /></a>
                </div>
                <div class="large-10 columns">
                    <h1>Obey the Testing Goat!</h1>
                    <h2><small><em>TDD for the Web, with Python, Selenium, Django, JavaScript and pals...</em></small></h2>
                </div>
            </div>
        </div>
    </header> <!-- end top banner -->

<div class="row">
    <div class="large-9 small-12 columns"> <!-- blog post div -->
        <header>
            <h2><a href="python-architecture-stuff-do-we-need-more.html" rel="bookmark" title="Permalink to Python Architecture Stuff: do we need more?">Python Architecture Stuff: do we need more?</a></h2>

             

        </header>
        <footer class="post-info">
            <abbr class="published" title="2019-02-11T15:28:00+00:00">
              Mon 11 February 2019
            </abbr>
                <address class="vcard author">
                  By <a class="url fn" href="http://www.obeythetestinggoat.com/author/harry.html">Harry</a>
                </address>
        </footer><!-- /.post-info -->

        <div>
            <p>I've been learning lots of new stuff about application architecture recently,
and I want to get a sense from you, dear reader, of whether these ideas are
of interest, and whether we should try and build some more resources 
(blogs, talks, etc) around it.</p>
<h2>How should we structure an application to get the most out of our tests?</h2>
<p>For me it all started with this question. 
At the <a href="https://www.obeythetestinggoat.com/book/chapter_hot_lava.html">end of my book</a>
I concluded on a chapter discussing how to get the most out of your tests, on
the tradeoffs between unit, integration and end-to-end tests, and made some
vague, flailing gestures towards topics I didn't really understand: <em>ports and
adapters</em>, <em>hexagonal architecture</em>, <em>functional core imperative shell</em>, the
<em>clean architecture</em>, and so on.</p>
<p>Since then I've managed to fall in with a <a href="https://io.made.com/">tech team</a>
that are actively implementing these sorts of patterns, in Python.  And the
thing is, these architectural patterns are nothing new, people have been
exploring them for years in the world of Java and C#.  They were just new to
me... and I may be over-reaching from my own experience here (I'm interested
in your reaction), but they are perhaps new to the Python community in general?</p>
<p>It does feel like, as we mature, more and more of what were once small projects
and plucky startups turn into complex business and (whisper it) enterprise
software, so this stuff is likely to get more and more salient.</p>
<p>I came to it initially from the angle of testing, and the right kind of
architecture really can help you to get the most out of your tests, by
separating out a core of business logic (the "domain model") and freeing it
from all infrastructure dependencies, allowing it to be tested entirely through
fast, flexible unit tests.  At Made it finally felt like the 
<a href="https://martinfowler.com/articles/practical-test-pyramid.html">test pyramid</a> was
an achievable goal rather than an impossible aspiration.</p>
<h2>Classic books on the topic (All Java.)</h2>
<p>The classic books (<a href="https://domainlanguage.com/ddd/">Evans on DDD</a> and 
<a href="https://www.martinfowler.com/books/eaa.html">Fowler on Architecture Patterns</a>,
are classic, and anyone with an interest in this stuff should read them, but
if you're anything like me, then wading through all that <code>public static void
main AbstractFactoryManager</code> gubbins is a bit wearing.  Maybe some more
lightweight, Pythonic intros would make it all feel a bit more plausible,
a bit less enterprise-architecture-astronaut-ey?</p>
<h2>Some existing resources in the Python world:</h2>
<p>Made's chief architect, the Venerable Bob, has written a 4-part blog series
on the way we do things here, which I really enjoyed when I first started.
They're a quick, practical intro to the basic concepts of DDD, ports and
adapters / dependency inversion, and to some extent, event-driven architecture.
And all in Python.  (trigger warning: type hints).</p>
<ol>
<li><a href="https://io.made.com/introducing-command-handler/">Ports and Adapters with Command Handler pattern in Python</a></li>
<li><a href="https://io.made.com/repository-and-unit-of-work-pattern-in-python/">Repository and Unit of Work Pattern in Python</a></li>
<li><a href="https://io.made.com/commands-and-queries-handlers-and-views/">Commands and Queries, Handlers and Views</a></li>
<li><a href="https://io.made.com/why-use-domain-events/">Why use Domain Events?</a></li>
</ol>
<p>There's more on io.made.com but those are the main four.  We'd love to
get some feedback on them, what's covered well, what could do with more
explanation, and so on...</p>
<p>And: a very timely release from last Christmas, check out
<a href="https://leanpub.com/clean-architectures-in-python">Clean Architectures in Python</a>
by Leonardo Giordani.  It's really two  books in one, part one being an intro
to TDD, but part 2 has four chapters introducing very similar patterns to the
ones I'm talking about here.</p>
<p>I also enjoyed a talk from about a year ago by David Seddon 
<a href="http://seddonym.me/talks/2017-12-12-rocky-river/">The Rocky River, how to architect your Django monolith</a>,
showing someone else starting to think about how we go beyond the basic Django models/views/templates architecture.</p>
<p>There's lots more at this <a href="https://github.com/valignatev/ddd-dynamic">listing of DDD resources</a>
by Valentin Ignatev, which I came across recently on twitter.  It feels like something is in the air.</p>
<h2>Call to action:  is this stuff interesting?</h2>
<p>Bob's already had some good feedback to his blog posts, and Leonardo has had some good initial sales,
so I'm sensing some interest from the Python community out there, but I'd like to sanity-check it.</p>
<ul>
<li>Does this stuff sound interesting or relevant? Do you want to hear more?</li>
<li>Are you doing Python stuff that's getting beyond the bounds of "basic webapp development" or "data pipeline"? Are you finding it difficult to write fast unit tests? Are you starting to want to disentangle your business logic from whichever framework you use?</li>
<li>Are you doing DDD or using any of these classic patterns with Python already? Do you maybe have all the answers and want to tell me about it?  Or maybe just some answers and things that have worked well for you?</li>
<li>Do you think this stuff all sounds hella abstract and pointless? Maybe Made.com is a bit of an outliner in the Python world, in that we're writing logistics/ERP/enterprisey software in Python, and it all feels very different from what you do day-to-day?</li>
<li>What do you think the Python / dynamic languages community would most benefit from in terms of new guides to these topics?</li>
</ul>
<p>I'd love to hear from you. Comments are open, or <a href="https://twitter.com/hjwp">hmu on twitter, @hjwp</a></p>
<h2>Did I say read the classics?   Read the classics.</h2>
<ul>
<li>
<p>Patterns of Enterprise Architecture by Martin Fowler <a href="https://amzn.to/2U6HTZN">amazon.com</a> / <a href="https://amzn.to/2R0WkN3">.co.uk</a></p>
</li>
<li>
<p>Domain-Driven Design by Eric Evans <a href="https://amzn.to/2W9nANe">amazon.com</a> / <a href="https://amzn.to/2B7vmOP">.co.uk</a></p>
</li>
</ul>
        </div><!-- /.entry-content -->

    <div class="comments">
        <h3>Comments</h3>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
                var disqus_shortname = 'obeythetestinggoat';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>



    </div>
<div class="large-3 small-6 columns">
    <h6><a href="/pages/book.html">Read the book</a></h6>
    <p>
        The book is available both for free and for money.  
        It's all about TDD and Web programming.
        <a href="/pages/book.html">Read it here!</a>
    </p>
</div>

<div class="large-3 small-6 columns">
    <h6><a href="/pages/reviews-and-testimonials.html">Reviews & Testimonials</a></h6>
   
    <p>
        <i>"Hands down the best teaching book I've ever read"</i> &mdash;
        <i>"Even the first 4 chapters were worth the money"</i> &mdash;
        <i>"Oh my gosh! This book is outstanding"</i> &mdash;
        <i>"The testing goat is my new friend"</i> &mdash;
        <a href="/pages/reviews-and-testimonials.html">Read more...</a>
    </p>

</div>


<div class="large-3 small-6 columns">
    <h6><a href="/pages/tdd-resources.html">Resources</a></h6>
    <p>A selection of links and videos about TDD, not necessarily all mine, eg <a href="http://pyvideo.org/video/1657/fully-test-driven-web-development-with-django-and">this tutorial
        at PyCon 2013</a>, how to <a href="http://arstechnica.com/information-technology/2013/03/how-can-i-motivate-coworkers-to-write-unit-tests/">motivate coworkers to write unit tests</a>, thoughts on <a href="http://pyvideo.org/video/699/testing-and-django">Django's test tools</a>, <a href="https://www.youtube.com/watch?v=tdNnN5yTIeM">London-style TDD</a> and <a href="/pages/tdd-resources.html">more</a>.
</div>


<div class="large-3 small-6 columns">
    <h6><a href="http://www.tdd-django-tutorial.com">Old TDD / Django Tutorial</a></h6>
    <p>
    This is my <a href="http://www.tdd-django-tutorial.com">old TDD tutorial</a>,
    which follows along with the official Django tutorial, but with full TDD.  It
    badly needs updating. Read the book instead!
    </p>
</div>

<div class="large-3 small-6 columns">
    <h6><a href="/pages/save-the-testing-goat-campaign.html">Save the Testing Goat Campaign</a></h6>
    <p>
    The campaign page, preserved for history, which led to the glorious presence
    of the Testing Goat on the front of the book.
    </p>
</div></div>

  <footer class="row">
    <div class="large-12 columns">
      <hr>
      <div class="row">
        <div class="large-8 columns">
            <p>
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
                &nbsp
                <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Obey the Testing Goat website</span> 
                by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.obeythetestinggoat.com" property="cc:attributionName" rel="cc:attributionURL">Harry J.W. Percival</a> 
                is licensed under a 
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
                Site powered by <a href="http://getpelican.com/">Pelican</a>, and
                hosted on <a href="https://www.pythonanywhere.com">PythonAnywhere</a>.
                If you came here via one of the awesome "Year of the Testing Goat" stickers,
                you should know credit for the sweet cartoon goat goes to 
                <a href="http://www.squirrelmuffins.com/">Kat i on</a>
            </p>
       </div>

        <div class="large-4 columns">
          <ul class="inline-list right">
            <li><a href="/pages/book.html">Book</a></li>
            <li><a href="/pages/tdd-resources.html">Resources</a></li>
            <li>
                <a href="http://www.obeythetestinggoat.com/feeds/all.atom.xml" type="application/rss+xml"><i class="social foundicon-rss"></i> RSS</a></span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <script src="/static/js/vendor/custom.modernizr.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <script>
  document.write('<script src=js/vendor/' +
  ('__proto__' in {} ? 'zepto' : 'jquery') +
  '.js><\/script>')
  </script>
  <script src="js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>
  <script type="text/javascript">
    $(window).load(function() {
      $('#featured').orbit({ fluid: '2x1' });
    });
  </script>


  <script>   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');    ga('create', 'UA-40928035-1', 'obeythetestinggoat.com');   ga('send', 'pageview');  </script> 
  <!-- End Footer -->

</body>
</html>