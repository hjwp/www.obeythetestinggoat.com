<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Django-Rest-Framework</title>
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./pygments-default.css">
<script>var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
  if (httpRequest.readyState === XMLHttpRequest.DONE) {
    if (httpRequest.status === 200) {
      document.getElementById('header').innerHTML += httpRequest.responseText;
      var subheaders = document.getElementsByClassName('sectlevel2');
      var section;
      for (var i=0; i<subheaders.length; i++) {
        section = subheaders[i];
        if (section.innerHTML.indexOf(window.location.pathname) === -1) {
          section.style.display = 'none';
        } else {
          section.scrollIntoView && section.scrollIntoView();
        }
      }

    }
  }
};
httpRequest.open('GET', 'toc.html');
httpRequest.send();

</script></head>
<body class="article toc2 toc-left">
<div id="buy_the_book" style="position: absolute; top: 0; right: 0; z-index:100">
  <a href="/pages/book.html">
    <img src="images/buy_the_book.svg" alt="buy the book ribbon">
  </a>
</div>
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="appendix_DjangoRestFramework">Appendix G: Django-Rest-Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having
"rolled our own" REST API in the last appendix, it&#8217;s time to take
a look at <a href="http://www.django-rest-framework.org/">Django-Rest-Framework</a>,
which is a go-to choice for many Python/Django developers building APIs.
Just as Django aims to give you all the basic tools that you&#8217;ll need to
build a database-driven website (an ORM, templates, and so on), so DRF
aims to give you all the tools you need to build an API, and thus avoid
you having to write boilerplate code over and over again.</p>
</div>
<div class="paragraph">
<p>Writing this appendix, one of the main things I struggled with was getting the
exact same API that I&#8217;d just implemented manually to be replicated by DRF.
Getting the same URL layout and the same JSON data structures I&#8217;d defined
proved to be quite a challenge, and I felt like I was fighting the framework.</p>
</div>
<div class="paragraph">
<p>That&#8217;s always a warning sign.  The people who built Django-Rest-Framework
are a lot smarter than I am, and they&#8217;ve seen a lot more REST APIs than I
have, and if they&#8217;re opinionated about the way that things "should" look,
then maybe my time would be better spent seeing if I can adapt and work
with their view of the world, rather than forcing my own preconceptions
onto it.</p>
</div>
<div class="paragraph">
<p>"Don&#8217;t fight the framework" is one of the great pieces of advice I&#8217;ve heard.
Either go with the flow, or perhaps reassess whether you want to be using
a framework at all.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll work from the API we had at the end of the <a href="/book/appendix_rest_api.html">last
appendix</a>, and see if we can rewrite it to use DRF.</p>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph">
<p>A
quick <code>pip install</code> gets us DRF.  I&#8217;m just using the latest version, which
was 3.5.4 at the time of writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pip install djangorestframework</strong></pre>
</div>
</div>
<div class="paragraph">
<p>And we add <code>rest_framework</code> to <code>INSTALLED_APPS</code> in <em>settings.py</em>:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">superlists/settings.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-n">INSTALLED_APPS</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
    <span class="tok-c1">#'django.contrib.admin',</span>
    <span class="tok-s1">'django.contrib.auth'</span><span class="tok-p">,</span>
    <span class="tok-s1">'django.contrib.contenttypes'</span><span class="tok-p">,</span>
    <span class="tok-s1">'django.contrib.sessions'</span><span class="tok-p">,</span>
    <span class="tok-s1">'django.contrib.messages'</span><span class="tok-p">,</span>
    <span class="tok-s1">'django.contrib.staticfiles'</span><span class="tok-p">,</span>
    <span class="tok-s1">'lists'</span><span class="tok-p">,</span>
    <span class="tok-s1">'accounts'</span><span class="tok-p">,</span>
    <span class="tok-s1">'functional_tests'</span><span class="tok-p">,</span>
    <span class="tok-s1">'rest_framework'</span><span class="tok-p">,</span>
<span class="tok-p">]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_serializers_well_modelserializers_really">Serializers (Well, ModelSerializers, Really)</h3>
<div class="paragraph">
<p>The
<a href="http://bit.ly/2t6T6eX">Django-Rest-Framework tutorial</a>
is a pretty good resource to learn DRF.  The first thing you&#8217;ll come across
is serializers, and specifically in our case, "ModelSerializers". They are
DRF&#8217;s way of converting from Django database models to JSON (or possibly other
formats) that you can send over the wire:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/api.py (ch37l003)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-kn">from</span> <span class="tok-nn">lists.models</span> <span class="tok-kn">import</span> <span class="tok-n">List</span><span class="tok-p">,</span> <span class="tok-n">Item</span>
<span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
<span class="tok-kn">from</span> <span class="tok-nn">rest_framework</span> <span class="tok-kn">import</span> <span class="tok-n">routers</span><span class="tok-p">,</span> <span class="tok-n">serializers</span><span class="tok-p">,</span> <span class="tok-n">viewsets</span>


<span class="tok-k">class</span> <span class="tok-nc">ItemSerializer</span><span class="tok-p">(</span><span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">ModelSerializer</span><span class="tok-p">):</span>

    <span class="tok-k">class</span> <span class="tok-nc">Meta</span><span class="tok-p">:</span>
        <span class="tok-n">model</span> <span class="tok-o">=</span> <span class="tok-n">Item</span>
        <span class="tok-n">fields</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-s1">'id'</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">)</span>


<span class="tok-k">class</span> <span class="tok-nc">ListSerializer</span><span class="tok-p">(</span><span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">ModelSerializer</span><span class="tok-p">):</span>
    <span class="tok-n">items</span> <span class="tok-o">=</span> <span class="tok-n">ItemSerializer</span><span class="tok-p">(</span><span class="tok-n">many</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span> <span class="tok-n">source</span><span class="tok-o">=</span><span class="tok-s1">'item_set'</span><span class="tok-p">)</span>

    <span class="tok-k">class</span> <span class="tok-nc">Meta</span><span class="tok-p">:</span>
        <span class="tok-n">model</span> <span class="tok-o">=</span> <span class="tok-n">List</span>
        <span class="tok-n">fields</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-s1">'id'</span><span class="tok-p">,</span> <span class="tok-s1">'items'</span><span class="tok-p">,)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2 pagebreak-before">
<h3 id="_viewsets_well_modelviewsets_really_and_routers">Viewsets (Well, ModelViewsets, Really) and Routers</h3>
<div class="paragraph">
<p>A
ModelViewSet is DRF&#8217;s way of defining all the different ways you can interact
with the objects for a particular model via your API. Once you tell it which
models you&#8217;re interested in (via the <code>queryset</code> attribute) and how to serialize
them (<code>serializer_class</code>), it will then do the rest&#8212;&#8203;automatically building
views for you that will let you list, retrieve, update, and even delete objects.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s all we need to do for a ViewSet that&#8217;ll be able to retrieve items for
a particular list:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/api.py (ch37l004)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">class</span> <span class="tok-nc">ListViewSet</span><span class="tok-p">(</span><span class="tok-n">viewsets</span><span class="tok-o">.</span><span class="tok-n">ModelViewSet</span><span class="tok-p">):</span>
    <span class="tok-n">queryset</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">()</span>
    <span class="tok-n">serializer_class</span> <span class="tok-o">=</span> <span class="tok-n">ListSerializer</span>


<span class="tok-n">router</span> <span class="tok-o">=</span> <span class="tok-n">routers</span><span class="tok-o">.</span><span class="tok-n">SimpleRouter</span><span class="tok-p">()</span>
<span class="tok-n">router</span><span class="tok-o">.</span><span class="tok-n">register</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'lists'</span><span class="tok-p">,</span> <span class="tok-n">ListViewSet</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A <em>router</em> is DRF&#8217;s way of building URL configuration automatically, and
mapping them to the functionality provided by the ViewSet.</p>
</div>
<div class="paragraph">
<p>At this point we can start pointing our <em>urls.py</em> at our new router,
bypassing the old API code and seeing how our tests do with the new stuff:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">superlists/urls.py (ch37l005)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
<span class="tok-c1"># from lists.api import urls as api_urls</span>
<span class="tok-kn">from</span> <span class="tok-nn">lists.api</span> <span class="tok-kn">import</span> <span class="tok-n">router</span>

<span class="tok-n">urlpatterns</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
    <span class="tok-n">url</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'^$'</span><span class="tok-p">,</span> <span class="tok-n">list_views</span><span class="tok-o">.</span><span class="tok-n">home_page</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s1">'home'</span><span class="tok-p">),</span>
    <span class="tok-n">url</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'^lists/'</span><span class="tok-p">,</span> <span class="tok-n">include</span><span class="tok-p">(</span><span class="tok-n">list_urls</span><span class="tok-p">)),</span>
    <span class="tok-n">url</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'^accounts/'</span><span class="tok-p">,</span> <span class="tok-n">include</span><span class="tok-p">(</span><span class="tok-n">accounts_urls</span><span class="tok-p">)),</span>
    <span class="tok-c1"># url(r'^api/', include(api_urls)),</span>
    <span class="tok-n">url</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'^api/'</span><span class="tok-p">,</span> <span class="tok-n">include</span><span class="tok-p">(</span><span class="tok-n">router</span><span class="tok-o">.</span><span class="tok-n">urls</span><span class="tok-p">)),</span>
<span class="tok-p">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>That makes loads of our tests fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>python manage.py test lists</strong>
[...]
django.urls.exceptions.NoReverseMatch: Reverse for 'api_list' not found.
'api_list' is not a valid view function or pattern name.
[...]
AssertionError: 405 != 400
[...]
AssertionError: {'id': 2, 'items': [{'id': 2, 'text': 'item 1'}, {'id': 3,
'text': 'item 2'}]} != [{'id': 2, 'text': 'item 1'}, {'id': 3, 'text': 'item
2'}]

 ---------------------------------------------------------------------
Ran 54 tests in 0.243s

FAILED (failures=4, errors=10)</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at those 10 errors first, all saying they cannot reverse
<code>api_list</code>.  It&#8217;s because the DRF router uses a different naming convention
for URLs than the one we used when we coded it manually. You&#8217;ll see from the
tracebacks that they&#8217;re happening when we render a template.  It&#8217;s <em>list.html</em>.
We can fix that in just one place; <code>api_list</code> becomes <code>list-detail</code>:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/templates/list.html (ch37l006)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><span></span>  <span class="tok-p">&lt;</span><span class="tok-nt">script</span><span class="tok-p">&gt;</span>
<span class="tok-nx">$</span><span class="tok-p">(</span><span class="tok-nb">document</span><span class="tok-p">).</span><span class="tok-nx">ready</span><span class="tok-p">(</span><span class="tok-kd">function</span><span class="tok-w"> </span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">  </span><span class="tok-kd">var</span><span class="tok-w"> </span><span class="tok-nx">url</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-s2">"{% url 'list-detail' list.id %}"</span><span class="tok-p">;</span>
<span class="tok-p">});</span>
<span class="tok-w">  </span><span class="tok-p">&lt;/</span><span class="tok-nt">script</span><span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>That will get us down to just four failures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>python manage.py test lists</strong>
[...]
FAIL: test_POSTing_a_new_item (lists.tests.test_api.ListAPITest)
[...]
FAIL: test_duplicate_items_error (lists.tests.test_api.ListAPITest)
[...]
FAIL: test_for_invalid_input_returns_error_code
(lists.tests.test_api.ListAPITest)
[...]
FAIL: test_get_returns_items_for_correct_list
(lists.tests.test_api.ListAPITest)
[...]
FAILED (failures=4)</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s DONT-ify all the validation tests for now, and save that complexity
for later:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/tests/test_api.py (ch37l007)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
    <span class="tok-k">def</span> <span class="tok-nf">DONTtest_for_invalid_input_nothing_saved_to_db</span><span class="tok-p">(</span><span class="tok-bp">self</span><span class="tok-p">):</span>
        <span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
    <span class="tok-k">def</span> <span class="tok-nf">DONTtest_for_invalid_input_returns_error_code</span><span class="tok-p">(</span><span class="tok-bp">self</span><span class="tok-p">):</span>
        <span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
    <span class="tok-k">def</span> <span class="tok-nf">DONTtest_duplicate_items_error</span><span class="tok-p">(</span><span class="tok-bp">self</span><span class="tok-p">):</span>
        <span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>And now we have just two failures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>FAIL: test_POSTing_a_new_item (lists.tests.test_api.ListAPITest)
[...]
    self.assertEqual(response.status_code, 201)
AssertionError: 405 != 201
[...]
FAIL: test_get_returns_items_for_correct_list
(lists.tests.test_api.ListAPITest)
[...]
AssertionError: {'id': 2, 'items': [{'id': 2, 'text': 'item 1'}, {'id': 3,
'text': 'item 2'}]} != [{'id': 2, 'text': 'item 1'}, {'id': 3, 'text': 'item
2'}]
[...]
FAILED (failures=2)</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at that last one first.</p>
</div>
<div class="paragraph">
<p>DRF&#8217;s default configuration does provide a slightly different data structure
to the one we built by hand&#8212;&#8203;doing a GET for a list gives you its ID, and
then the list items are inside a key called "items".  That means a slight
modification to our unit test, before it gets back to passing:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/tests/test_api.py (ch37l008)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="diff"><span></span><span class="tok-gu">@@ -23,10 +23,10 @@ class ListAPITest(TestCase):</span>
<span class="tok-w"> </span>        response = self.client.get(self.base_url.format(our_list.id))
<span class="tok-w"> </span>        self.assertEqual(
<span class="tok-w"> </span>            json.loads(response.content.decode('utf8')),
<span class="tok-gd">-            [</span>
<span class="tok-gi">+            {'id': our_list.id, 'items': [</span>
<span class="tok-w"> </span>                {'id': item1.id, 'text': item1.text},
<span class="tok-w"> </span>                {'id': item2.id, 'text': item2.text},
<span class="tok-gd">-            ]</span>
<span class="tok-gi">+            ]}</span>
<span class="tok-w"> </span>        )</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s the GET for retrieving list items sorted (and, as we&#8217;ll see later, we&#8217;ve
got a bunch of other stuff for free too).  How about adding new ones, using
POST?</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_different_url_for_post_item">A Different URL for POST Item</h3>
<div class="paragraph">
<p>This
is the point at which I gave up on fighting the framework and just saw
where DRF wanted to take me.  Although it&#8217;s possible, it&#8217;s quite torturous to
do a POST to the "lists" ViewSet in order to add an item to a list.</p>
</div>
<div class="paragraph">
<p>Instead, the simplest thing is to post to an item view, not a list view:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/api.py (ch37l009)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">class</span> <span class="tok-nc">ItemViewSet</span><span class="tok-p">(</span><span class="tok-n">viewsets</span><span class="tok-o">.</span><span class="tok-n">ModelViewSet</span><span class="tok-p">):</span>
    <span class="tok-n">serializer_class</span> <span class="tok-o">=</span> <span class="tok-n">ItemSerializer</span>
    <span class="tok-n">queryset</span> <span class="tok-o">=</span> <span class="tok-n">Item</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">()</span>


<span class="tok-p">[</span><span class="tok-o">...</span><span class="tok-p">]</span>
<span class="tok-n">router</span><span class="tok-o">.</span><span class="tok-n">register</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'items'</span><span class="tok-p">,</span> <span class="tok-n">ItemViewSet</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>So that means we change the test slightly, moving all the POST tests
out of the <span class="keep-together"><code>ListAPITest</code></span> and into a new test class, <code>ItemsAPITest</code>:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/tests/test_api.py (ch37l010)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-o">@@</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">,</span><span class="tok-mi">3</span> <span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">,</span><span class="tok-mi">4</span> <span class="tok-o">@@</span>
 <span class="tok-kn">import</span> <span class="tok-nn">json</span>
<span class="tok-o">+</span><span class="tok-kn">from</span> <span class="tok-nn">django.core.urlresolvers</span> <span class="tok-kn">import</span> <span class="tok-n">reverse</span>
 <span class="tok-kn">from</span> <span class="tok-nn">django.test</span> <span class="tok-kn">import</span> <span class="tok-n">TestCase</span>
 <span class="tok-kn">from</span> <span class="tok-nn">lists.models</span> <span class="tok-kn">import</span> <span class="tok-n">List</span><span class="tok-p">,</span> <span class="tok-n">Item</span>
<span class="tok-o">@@</span> <span class="tok-o">-</span><span class="tok-mi">31</span><span class="tok-p">,</span><span class="tok-mi">9</span> <span class="tok-o">+</span><span class="tok-mi">32</span><span class="tok-p">,</span><span class="tok-mi">13</span> <span class="tok-o">@@</span> <span class="tok-k">class</span> <span class="tok-nc">ListAPITest</span><span class="tok-p">(</span><span class="tok-n">TestCase</span><span class="tok-p">):</span>


<span class="tok-o">+</span>
<span class="tok-o">+</span><span class="tok-k">class</span> <span class="tok-nc">ItemsAPITest</span><span class="tok-p">(</span><span class="tok-n">TestCase</span><span class="tok-p">):</span>
<span class="tok-o">+</span>    <span class="tok-n">base_url</span> <span class="tok-o">=</span> <span class="tok-n">reverse</span><span class="tok-p">(</span><span class="tok-s1">'item-list'</span><span class="tok-p">)</span>
<span class="tok-o">+</span>
     <span class="tok-k">def</span> <span class="tok-nf">test_POSTing_a_new_item</span><span class="tok-p">(</span><span class="tok-bp">self</span><span class="tok-p">):</span>
         <span class="tok-n">list_</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">create</span><span class="tok-p">()</span>
         <span class="tok-n">response</span> <span class="tok-o">=</span> <span class="tok-bp">self</span><span class="tok-o">.</span><span class="tok-n">client</span><span class="tok-o">.</span><span class="tok-n">post</span><span class="tok-p">(</span>
<span class="tok-o">-</span>            <span class="tok-bp">self</span><span class="tok-o">.</span><span class="tok-n">base_url</span><span class="tok-o">.</span><span class="tok-n">format</span><span class="tok-p">(</span><span class="tok-n">list_</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">),</span>
<span class="tok-o">-</span>            <span class="tok-p">{</span><span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-s1">'new item'</span><span class="tok-p">},</span>
<span class="tok-o">+</span>            <span class="tok-bp">self</span><span class="tok-o">.</span><span class="tok-n">base_url</span><span class="tok-p">,</span>
<span class="tok-o">+</span>            <span class="tok-p">{</span><span class="tok-s1">'list'</span><span class="tok-p">:</span> <span class="tok-n">list_</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-s1">'new item'</span><span class="tok-p">},</span>
         <span class="tok-p">)</span>
         <span class="tok-bp">self</span><span class="tok-o">.</span><span class="tok-n">assertEqual</span><span class="tok-p">(</span><span class="tok-n">response</span><span class="tok-o">.</span><span class="tok-n">status_code</span><span class="tok-p">,</span> <span class="tok-mi">201</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>That will give us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>django.db.utils.IntegrityError: NOT NULL constraint failed: lists_item.list_id</pre>
</div>
</div>
<div class="paragraph">
<p>Until we add the list ID to our serialization of items; otherwise, we don&#8217;t know
what list it&#8217;s for:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/api.py (ch37l011)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">class</span> <span class="tok-nc">ItemSerializer</span><span class="tok-p">(</span><span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">ModelSerializer</span><span class="tok-p">):</span>

    <span class="tok-k">class</span> <span class="tok-nc">Meta</span><span class="tok-p">:</span>
        <span class="tok-n">model</span> <span class="tok-o">=</span> <span class="tok-n">Item</span>
        <span class="tok-n">fields</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-s1">'id'</span><span class="tok-p">,</span> <span class="tok-s1">'list'</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>And that causes another small associated test change:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/tests/test_api.py (ch37l012)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-o">@@</span> <span class="tok-o">-</span><span class="tok-mi">25</span><span class="tok-p">,</span><span class="tok-mi">8</span> <span class="tok-o">+</span><span class="tok-mi">25</span><span class="tok-p">,</span><span class="tok-mi">8</span> <span class="tok-o">@@</span> <span class="tok-k">class</span> <span class="tok-nc">ListAPITest</span><span class="tok-p">(</span><span class="tok-n">TestCase</span><span class="tok-p">):</span>
         <span class="tok-bp">self</span><span class="tok-o">.</span><span class="tok-n">assertEqual</span><span class="tok-p">(</span>
             <span class="tok-n">json</span><span class="tok-o">.</span><span class="tok-n">loads</span><span class="tok-p">(</span><span class="tok-n">response</span><span class="tok-o">.</span><span class="tok-n">content</span><span class="tok-o">.</span><span class="tok-n">decode</span><span class="tok-p">(</span><span class="tok-s1">'utf8'</span><span class="tok-p">)),</span>
             <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">our_list</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'items'</span><span class="tok-p">:</span> <span class="tok-p">[</span>
<span class="tok-o">-</span>                <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">item1</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-n">item1</span><span class="tok-o">.</span><span class="tok-n">text</span><span class="tok-p">},</span>
<span class="tok-o">-</span>                <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">item2</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-n">item2</span><span class="tok-o">.</span><span class="tok-n">text</span><span class="tok-p">},</span>
<span class="tok-o">+</span>                <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">item1</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'list'</span><span class="tok-p">:</span> <span class="tok-n">our_list</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-n">item1</span><span class="tok-o">.</span><span class="tok-n">text</span><span class="tok-p">},</span>
<span class="tok-o">+</span>                <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">item2</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'list'</span><span class="tok-p">:</span> <span class="tok-n">our_list</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-n">item2</span><span class="tok-o">.</span><span class="tok-n">text</span><span class="tok-p">},</span>
             <span class="tok-p">]}</span>
         <span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adapting_the_client_side">Adapting the Client Side</h3>
<div class="paragraph">
<p>Our
API no longer returns a flat array of the items in a list.  It returns an
object, with a <code>.items</code> attribute that represents the items.  That means a
small tweak to our <code>update&#8203;Items</code> function:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/static/list.js (ch37l013)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="diff"><span></span><span class="tok-gu">@@ -3,8 +3,8 @@ window.Superlists = {};</span>
<span class="tok-w"> </span>window.Superlists.updateItems = function (url) {
<span class="tok-w"> </span>  $.get(url).done(function (response) {
<span class="tok-w"> </span>    var rows = '';
<span class="tok-gd">-    for (var i=0; i&lt;response.length; i++) {</span>
<span class="tok-gd">-      var item = response[i];</span>
<span class="tok-gi">+    for (var i=0; i&lt;response.items.length; i++) {</span>
<span class="tok-gi">+      var item = response.items[i];</span>
<span class="tok-w"> </span>      rows += '\n&lt;tr&gt;&lt;td&gt;' + (i+1) + ': ' + item.text + '&lt;/td&gt;&lt;/tr&gt;';
<span class="tok-w"> </span>    }
<span class="tok-w"> </span>    $('#id_list_table').html(rows);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>And because we&#8217;re using different URLs for GETing lists and POSTing items,
we tweak the <code>initialize</code> function slightly too.  Rather than multiple
arguments, we&#8217;ll switch to using a <code>params</code> object containing the required
config:</p>
</div>
<div class="exampleblock sourcecode small-code">
<div class="title">lists/static/list.js</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="diff"><span></span><span class="tok-gu">@@ -11,23 +11,24 @@ window.Superlists.updateItems = function (url) {</span>
<span class="tok-w"> </span>  });
<span class="tok-w"> </span>};

<span class="tok-gd">-window.Superlists.initialize = function (url) {</span>
<span class="tok-gi">+window.Superlists.initialize = function (params) {</span>
<span class="tok-w"> </span>  $('input[name="text"]').on('keypress', function () {
<span class="tok-w"> </span>    $('.has-error').hide();
<span class="tok-w"> </span>  });

<span class="tok-gd">-  if (url) {</span>
<span class="tok-gd">-    window.Superlists.updateItems(url);</span>
<span class="tok-gi">+  if (params) {</span>
<span class="tok-gi">+    window.Superlists.updateItems(params.listApiUrl);</span>

<span class="tok-w"> </span>    var form = $('#id_item_form');
<span class="tok-w"> </span>    form.on('submit', function(event) {
<span class="tok-w"> </span>      event.preventDefault();
<span class="tok-gd">-      $.post(url, {</span>
<span class="tok-gi">+      $.post(params.itemsApiUrl, {</span>
<span class="tok-gi">+        'list': params.listId,</span>
<span class="tok-w"> </span>        'text': form.find('input[name="text"]').val(),
<span class="tok-w"> </span>        'csrfmiddlewaretoken': form.find('input[name="csrfmiddlewaretoken"]').val(),
<span class="tok-w"> </span>      }).done(function () {
<span class="tok-w"> </span>        $('.has-error').hide();
<span class="tok-gd">-        window.Superlists.updateItems(url);</span>
<span class="tok-gi">+        window.Superlists.updateItems(params.listApiUrl);</span>
<span class="tok-w"> </span>      }).fail(function (xhr) {
<span class="tok-w"> </span>        $('.has-error').show();
<span class="tok-w"> </span>        if (xhr.responseJSON &amp;&amp; xhr.responseJSON.error) {</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We reflect that in <em>list.html</em>:</p>
</div>
<div class="exampleblock sourcecode">
<div class="title">lists/templates/list.html (ch37l014)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><span></span>$(document).ready(function () {
  window.Superlists.initialize({
    listApiUrl: "{% url 'list-detail' list.id %}",
    itemsApiUrl: "{% url 'item-list' %}",
    listId: {{ list.id }},
  });
});</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>And that&#8217;s actually enough to get the basic FT working again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>python manage.py test functional_tests.test_simple_list_creation</strong>
[...]
Ran 2 tests in 15.635s

OK</pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s a few more changes to do with error handling, which you can explore in
the
<a href="https://github.com/hjwp/book-example/blob/appendix_DjangoRestFramework/lists/api.py">repo
for this appendix</a> if you&#8217;re curious.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_django_rest_framework_gives_you">What Django-Rest-Framework Gives You</h3>
<div class="paragraph">
<p>You
may be wondering what the point of using this framework was.</p>
</div>
<div class="sect3">
<h4 id="_configuration_instead_of_code">Configuration Instead of Code</h4>
<div class="paragraph">
<p>Well, the first advantage is that I&#8217;ve transformed my old procedural view
function into a more declarative syntax:</p>
</div>
<div class="exampleblock sourcecode currentcontents dofirst-ch37l016">
<div class="title">lists/api.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">def</span> <span class="tok-nf">list</span><span class="tok-p">(</span><span class="tok-n">request</span><span class="tok-p">,</span> <span class="tok-n">list_id</span><span class="tok-p">):</span>
    <span class="tok-n">list_</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-nb">id</span><span class="tok-o">=</span><span class="tok-n">list_id</span><span class="tok-p">)</span>
    <span class="tok-k">if</span> <span class="tok-n">request</span><span class="tok-o">.</span><span class="tok-n">method</span> <span class="tok-o">==</span> <span class="tok-s1">'POST'</span><span class="tok-p">:</span>
        <span class="tok-n">form</span> <span class="tok-o">=</span> <span class="tok-n">ExistingListItemForm</span><span class="tok-p">(</span><span class="tok-n">for_list</span><span class="tok-o">=</span><span class="tok-n">list_</span><span class="tok-p">,</span> <span class="tok-n">data</span><span class="tok-o">=</span><span class="tok-n">request</span><span class="tok-o">.</span><span class="tok-n">POST</span><span class="tok-p">)</span>
        <span class="tok-k">if</span> <span class="tok-n">form</span><span class="tok-o">.</span><span class="tok-n">is_valid</span><span class="tok-p">():</span>
            <span class="tok-n">form</span><span class="tok-o">.</span><span class="tok-n">save</span><span class="tok-p">()</span>
            <span class="tok-k">return</span> <span class="tok-n">HttpResponse</span><span class="tok-p">(</span><span class="tok-n">status</span><span class="tok-o">=</span><span class="tok-mi">201</span><span class="tok-p">)</span>
        <span class="tok-k">else</span><span class="tok-p">:</span>
            <span class="tok-k">return</span> <span class="tok-n">HttpResponse</span><span class="tok-p">(</span>
                <span class="tok-n">json</span><span class="tok-o">.</span><span class="tok-n">dumps</span><span class="tok-p">({</span><span class="tok-s1">'error'</span><span class="tok-p">:</span> <span class="tok-n">form</span><span class="tok-o">.</span><span class="tok-n">errors</span><span class="tok-p">[</span><span class="tok-s1">'text'</span><span class="tok-p">][</span><span class="tok-mi">0</span><span class="tok-p">]}),</span>
                <span class="tok-n">content_type</span><span class="tok-o">=</span><span class="tok-s1">'application/json'</span><span class="tok-p">,</span>
                <span class="tok-n">status</span><span class="tok-o">=</span><span class="tok-mi">400</span>
            <span class="tok-p">)</span>
    <span class="tok-n">item_dicts</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
        <span class="tok-p">{</span><span class="tok-s1">'id'</span><span class="tok-p">:</span> <span class="tok-n">item</span><span class="tok-o">.</span><span class="tok-n">id</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">:</span> <span class="tok-n">item</span><span class="tok-o">.</span><span class="tok-n">text</span><span class="tok-p">}</span>
        <span class="tok-k">for</span> <span class="tok-n">item</span> <span class="tok-ow">in</span> <span class="tok-n">list_</span><span class="tok-o">.</span><span class="tok-n">item_set</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">()</span>
    <span class="tok-p">]</span>
    <span class="tok-k">return</span> <span class="tok-n">HttpResponse</span><span class="tok-p">(</span>
        <span class="tok-n">json</span><span class="tok-o">.</span><span class="tok-n">dumps</span><span class="tok-p">(</span><span class="tok-n">item_dicts</span><span class="tok-p">),</span>
        <span class="tok-n">content_type</span><span class="tok-o">=</span><span class="tok-s1">'application/json'</span>
    <span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you compare this to the final DRF version, you&#8217;ll notice that we are
actually now entirely configured:</p>
</div>
<div class="exampleblock sourcecode currentcontents dofirst-ch37l019">
<div class="title">lists/api.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">class</span> <span class="tok-nc">ItemSerializer</span><span class="tok-p">(</span><span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">ModelSerializer</span><span class="tok-p">):</span>
    <span class="tok-n">text</span> <span class="tok-o">=</span> <span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">CharField</span><span class="tok-p">(</span>
        <span class="tok-n">allow_blank</span><span class="tok-o">=</span><span class="tok-kc">False</span><span class="tok-p">,</span> <span class="tok-n">error_messages</span><span class="tok-o">=</span><span class="tok-p">{</span><span class="tok-s1">'blank'</span><span class="tok-p">:</span> <span class="tok-n">EMPTY_ITEM_ERROR</span><span class="tok-p">}</span>
    <span class="tok-p">)</span>

    <span class="tok-k">class</span> <span class="tok-nc">Meta</span><span class="tok-p">:</span>
        <span class="tok-n">model</span> <span class="tok-o">=</span> <span class="tok-n">Item</span>
        <span class="tok-n">fields</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-s1">'id'</span><span class="tok-p">,</span> <span class="tok-s1">'list'</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">)</span>
        <span class="tok-n">validators</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
            <span class="tok-n">UniqueTogetherValidator</span><span class="tok-p">(</span>
                <span class="tok-n">queryset</span><span class="tok-o">=</span><span class="tok-n">Item</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">(),</span>
                <span class="tok-n">fields</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-s1">'list'</span><span class="tok-p">,</span> <span class="tok-s1">'text'</span><span class="tok-p">),</span>
                <span class="tok-n">message</span><span class="tok-o">=</span><span class="tok-n">DUPLICATE_ITEM_ERROR</span>
            <span class="tok-p">)</span>
        <span class="tok-p">]</span>


<span class="tok-k">class</span> <span class="tok-nc">ListSerializer</span><span class="tok-p">(</span><span class="tok-n">serializers</span><span class="tok-o">.</span><span class="tok-n">ModelSerializer</span><span class="tok-p">):</span>
    <span class="tok-n">items</span> <span class="tok-o">=</span> <span class="tok-n">ItemSerializer</span><span class="tok-p">(</span><span class="tok-n">many</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span> <span class="tok-n">source</span><span class="tok-o">=</span><span class="tok-s1">'item_set'</span><span class="tok-p">)</span>

    <span class="tok-k">class</span> <span class="tok-nc">Meta</span><span class="tok-p">:</span>
        <span class="tok-n">model</span> <span class="tok-o">=</span> <span class="tok-n">List</span>
        <span class="tok-n">fields</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-s1">'id'</span><span class="tok-p">,</span> <span class="tok-s1">'items'</span><span class="tok-p">,)</span>


<span class="tok-k">class</span> <span class="tok-nc">ListViewSet</span><span class="tok-p">(</span><span class="tok-n">viewsets</span><span class="tok-o">.</span><span class="tok-n">ModelViewSet</span><span class="tok-p">):</span>
    <span class="tok-n">queryset</span> <span class="tok-o">=</span> <span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">()</span>
    <span class="tok-n">serializer_class</span> <span class="tok-o">=</span> <span class="tok-n">ListSerializer</span>


<span class="tok-k">class</span> <span class="tok-nc">ItemViewSet</span><span class="tok-p">(</span><span class="tok-n">viewsets</span><span class="tok-o">.</span><span class="tok-n">ModelViewSet</span><span class="tok-p">):</span>
    <span class="tok-n">serializer_class</span> <span class="tok-o">=</span> <span class="tok-n">ItemSerializer</span>
    <span class="tok-n">queryset</span> <span class="tok-o">=</span> <span class="tok-n">Item</span><span class="tok-o">.</span><span class="tok-n">objects</span><span class="tok-o">.</span><span class="tok-n">all</span><span class="tok-p">()</span>


<span class="tok-n">router</span> <span class="tok-o">=</span> <span class="tok-n">routers</span><span class="tok-o">.</span><span class="tok-n">SimpleRouter</span><span class="tok-p">()</span>
<span class="tok-n">router</span><span class="tok-o">.</span><span class="tok-n">register</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'lists'</span><span class="tok-p">,</span> <span class="tok-n">ListViewSet</span><span class="tok-p">)</span>
<span class="tok-n">router</span><span class="tok-o">.</span><span class="tok-n">register</span><span class="tok-p">(</span><span class="tok-sa">r</span><span class="tok-s1">'items'</span><span class="tok-p">,</span> <span class="tok-n">ItemViewSet</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_free_functionality">Free Functionality</h4>
<div class="paragraph">
<p>The second advantage is that, by using DRF&#8217;s ModelSerializer, ViewSet, and
routers, I&#8217;ve actually ended up with a much more extensive API than the one I&#8217;d
rolled by hand.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All the HTTP methods, GET, POST, PUT, PATCH, DELETE, and OPTIONS, now work,
out of the box, for all list and items URLs.</p>
</li>
<li>
<p>And a browsable/self-documenting version of the API is available at
<em>http://localhost:8000/api/lists/</em> and <em>http://localhost:8000/api/items</em>. (<a href="#figag01">A free browsable API for your users</a>; try it!)</p>
</li>
</ul>
</div>
<div id="figag01" class="imageblock">
<div class="content">
<img src="images/twp2_ag01.png" alt="Screenshot of DRF browsable api page at http://localhost:8000/api/items/">
</div>
<div class="title">Figure 1. A free browsable API for your users</div>
</div>
<div class="paragraph">
<p>There&#8217;s more information in
<a href="http://www.django-rest-framework.org/topics/documenting-your-api/#self-describing-apis">the
DRF docs</a>, but those are both seriously neat features to be able to offer the
end users of your API.</p>
</div>
<div class="paragraph">
<p>In short, DRF is a great way of generating APIs, almost automatically, based on
your existing models structure.  If you&#8217;re using Django, definitely check it
out before you start hand-rolling your own API code.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Django-Rest-Framework Tips</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Don&#8217;t fight the framework</dt>
<dd>
<p>Going with the flow is often the best way to stay productive.  That, or
maybe don&#8217;t use the framework.  Or use it at a lower level.</p>
</dd>
<dt class="hdlist1">Routers and ViewSets for the principle of least surprise</dt>
<dd>
<p>One of the advantages of DRF is that its generic tools like routers and
ViewSets will give you a very predictable API, with sensible defaults
for its endpoints, URL structure, and responses for different HTTP methods.</p>
</dd>
<dt class="hdlist1">Check out the self-documenting, browsable version</dt>
<dd>
<p>Check out your API endpoints in a browser. DRF responds differently when it
detects your API is being accessed by a "normal" web browser, and displays
a very nice, self-documenting version of itself, which you can share with
your users.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
License: Creative Commons <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode">CC-BY-NC-ND</a>. Last updated: 2024-08-29 11:52:04 +0100
</div>
</div>
<div class="comments" style="padding: 20px">
  <h3>Comments</h3>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.identifier = 'appendix_DjangoRestFramework';
    };
    
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//obeythetestinggoat.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

<html><head><script>   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');    ga('create', 'UA-40928035-1', 'obeythetestinggoat.com');   ga('send', 'pageview');  </script>
</head></html></body>
</html>